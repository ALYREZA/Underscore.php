<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="author" content="Brian Haveri" />
  <meta name="description" content="Underscore.php is a PHP port of the popular Underscore.js library" />

  <title>Underscore.php</title>

  <style type="text/css">
    body {
      margin-top: 1.0em;
      background-color: #f2f2f2;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      font-size: 14px;
      color: #222;
      line-height: 1.4em;
    }
    #container {
      margin: 0 0 0 50px;
      width: 680px;
    }
    h1 { font-size: 32px; padding: 20px 0 5px 0; margin-left: -5px; }
    h1 .small { font-size: 0.4em; }
    h1 a { background: none; color: #222; }
    h2 { font-size: 24px; font-weight: bold; color: #0d0d0d; margin: 30px 0 5px 0; border-top: 3px solid #ddd; padding-top: 30px; }
    h3 { font-size: 16px; font-weight: bold; color: #0d0d0d; margin: 20px 0 5px 0; }
    p { margin: 0 0 10px 0; }
    a { background: #5A68A5; color: #fff; padding: 5px 5px 2px 5px; text-decoration: none; }
    @media screen and (-webkit-min-device-pixel-ratio:0) {
      a { padding: 2px 5px; }
    }
    a:hover { background: #384683; color: #fff; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    pre { color: #666; background: #ddd; padding: 15px; margin: 5px 0; border-left: 5px solid #5A68A5; font-family: Monaco, "Lucida Grande", monospace; }
    code { font-family: Monaco, "Lucida Grande", monospace; color: #666; margin-left: 15px; }
    code.inline { margin: 0; }
    hr { border: 0; width: 100%; border-bottom: 3px solid #ddd; margin: 20px 0; }
    .footer { text-align:center; padding-top:30px; font-style: italic; }
    .fade { color: #aaa; }
    .function { font-size: 20px; }
    .alias { float: right; color: #666; font-style: italic; }
    .block { margin-top: 35px; margin-bottom: 2px; }
    nav p { line-height: 1.8em; }
  </style>
</head>

<body>
  <div id="container">

    <h1><a href="http://github.com/brianhaveri/Underscore.php">Underscore.php</a>
      <span class="small">by <a href="http://github.com/brianhaveri">brianhaveri</a></span></h1>

    <nav>
      <p><a href="http://github.com/brianhaveri/Underscore.php">Underscore.php</a> is a PHP port of the popular <a href="http://documentcloud.github.com/underscore/">Underscore.js</a> library. In addition to porting Underscore's functionality, Underscore.php includes matching unit tests.</p>
      <p>Underscore.php is <a href="http://github.com/brianhaveri/Underscore.php">hosted on GitHub</a> and open sourced under the MIT license.</p>
    </nav>
      
    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/brianhaveri/Underscore.php/zipball/master">zip</a> or
      <a href="http://github.com/brianhaveri/Underscore.php/tarball/master">tar</a> formats.
    </p>
    
    <nav>
      <h2>Table of Contents</h2>
      <p><a href="#styles">Object-Oriented and Functional Styles</a></p>
      
      <h3>Collections</h3>
      <p>
        <a href="#each">each</a>,
        <a href="#map">map</a>,
        <a href="#reduce">reduce</a>,
        <a href="#reduceRight">reduceRight</a>,
        <a href="#detect">detect</a>,
        <a href="#select">select</a>,
        <a href="#reject">reject</a>,
        <a href="#all">all</a>,
        <a href="#any">any</a>,
        <a href="#includ">includ</a>,
        <a href="#invoke">invoke</a>,
        <a href="#pluck">pluck</a>,
        <a href="#max">max</a>,
        <a href="#min">min</a>,
        <a href="#sortBy">sortBy</a>,
        <a href="#sortedIndex">sortedIndex</a>,
        <a href="#toArray">toArray</a>,
        <a href="#size">size</a>
      </p>
      
      <h3>Arrays</h3>
      <p>
        <a href="#first">first</a>,
        <a href="#rest">rest</a>,
        <a href="#last">last</a>,
        <a href="#compact">compact</a>,
        <a href="#flatten">flatten</a>,
        <a href="#without">without</a>,
        <a href="#uniq">uniq</a>,
        <a href="#intersect">intersect</a>,
        <a href="#zip">zip</a>,
        <a href="#indexOf">indexOf</a>,
        <a href="#lastIndexOf">lastIndexOf</a>,
        <a href="#range">range</a></span>
      </p>
      
      <h3>Functions</h3>
      <p>
        <span class="fade">bind</span>,
        <span class="fade">bindAll</span>
        <a href="#memoize">memoize</a>,
        <span class="fade">delay</span>,
        <span class="fade">defer</span>,
        <a href="#throttle">throttle</a>,
        <span class="fade">debounce</span>,
        <a href="#once">once</a>,
        <a href="#after">after</a>,
        <a href="#wrap">wrap</a>,
        <a href="#compose">compose</a>
      </p>
      
      <h3>Objects</h3>
      <p>
        <a href="#keys">keys</a>,
        <a href="#values">values</a>,
        <a href="#functions">functions</a>,
        <a href="#extend">extend</a>,
        <a href="#defaults">defaults</a>,
        <a href="#clone">clone</a>,
        <a href="#tap">tap</a>,
        <a href="#isEqual">isEqual</a>,
        <a href="#isEmpty">isEmpty</a>,
        <span class="fade">isElement</span>,
        <a href="#isArray">isArray</a>,
        <span class="fade">isArguments</span>,
        <a href="#isFunction">isFunction</a>,
        <a href="#isString">isString</a>,
        <a href="#isNumber">isNumber</a>,
        <a href="#isBoolean">isBoolean</a>,
        <a href="#isDate">isDate</a>,
        <span class="fade">isRegExp</span>,
        <a href="#isNaN">isNaN</a>,
        <a href="#isNull">isNull</a>,
        <a href="#isUndefined">isUndefined</a>
      </p>
      
      <h3>Utility</h3>
      <p>
        <span class="fade">noConflict</span>,
        <a href="#identity">identity</a>,
        <a href="#times">times</a>,
        <a href="#mixin">mixin</a>,
        <a href="#uniqueId">uniqueId</a>,
        <a href="#template">template</a>
      </p>
      
      <h3>Chaining</h3>
      <p>
        <a href="#chain">chain</a>,
        <a href="#value">value</a>
      </p>
      
      <p class="fade"><i>Some functions were not ported from Underscore.js to Underscore.php for technical reasons or because they weren't applicable to PHP.</i></p>
    </nav>
    
    <h2 id="styles">Object-Oriented and Functional Styles</h2>
    <p>Underscore.php works in both object-oriented and functional styles. The following lines are identical ways to double a list of numbers.</p>
    <pre>_::map(array(1, 2, 3), function($n) { return $n * 2; });
_(array(1, 2, 3))->map(function($n) { return $n * 2; });</pre>

<h2 id="collections">Collections</h2>
<p class="block" id="each"><b class="function">each</b> <code>_::each(collection, iterator)</code></p>
<p>Iterates over the collection and yield each in turn to the iterator function. Arguments passed to iterator are (value, key, collection). Unlike Underscore.js, context is passed using PHP's <code class="inline">use</code> statement. Underscore.php does not contain the forEach alias because 'foreach' is a reserved keyword in PHP.</p>
<pre>_::each(array(1, 2, 3), function($num) { echo $num . ','; }); // 1,2,3,

$multiplier = 2;
_::each(array(1, 2, 3), function($num, $index) use ($multiplier) {
  echo $index . '=' . ($num * $multiplier) . ',';
});
// 0=2,1=4,2=6,</pre>

<p class="block" id="map"><b class="function">map</b> <code>_::map(collection, iterator)</code></p>
<p>Returns an array of values by mapping each in collection through the iterator. Arguments passed to iterator are (value, key, collection). Unlike Underscore.js, context is passed using PHP's <code class="inline">use</code> statement.</p>
<pre>_::map(array(1, 2, 3), function($num) { return $num * 3; }); // array(3, 6, 9)

_::map(array('one'=>1, 'two'=>2, 'three'=>3), function($num, $key) {
  return $num * 3;
});
// array(3, 6, 9);
</pre>

<p class="block" id="reduce"><b class="function">reduce</b> <code>_::reduce(collection, iterator, memo)</code> <span class="alias">Aliases: <b>inject, foldl</b></span></p>
<p>Reduce the collection into a single value. Memo is the initial state of the reduction, updated by the return value of the iterator. Unlike Underscore.js, context is passed using PHP's <code class="inline">use</code> statement.</p>
<pre>_::reduce(array(1, 2, 3), function($memo, $num) { return $memo + $num; }, 0); // 6</pre>

<p class="block" id="reduceRight"><b class="function">reduceRight</b> <code>_::reduceRight(collection, iterator, memo)</code> <span class="alias">Alias: <b>foldr</b></span></p>
<p>Right-associative version of reduce.</p>
<pre>$list = array((array(0, 1), array(2, 3), array(5, 6)));
$flat = _::reduceRight($list, function($a, $b) { return $a . $b; }, array());
// array(4, 5, 2, 3, 0, 1)</pre>

<p class="block" id="detect"><b class="function">detect</b> <code>_::detect(collection, iterator)</code></p>
<p>Return the value of the first item in the collection that passes the truth iterator test.</p>
<pre>_::select(array(1, 2, 3, 4), function($num) { return $num % 2 === 0; }); // 2</pre>

<p class="block" id="select"><b class="function">select</b> <code>_::select(collection, iterator)</code></p>
<p>Return the values in the collection that pass the truth iterator test.</p>
<pre>_::select(array(1, 2, 3, 4), function($num) { return $num % 2 === 0; }); // array(2, 4)</pre>

<p class="block" id="reject"><b class="function">reject</b> <code>_::reject(collection, iterator)</code></p>
<p>Return the values in the collection that fail the truth iterator test.</p>
<pre>_::reject(array(1, 2, 3, 4), function($num) { return $num % 2 === 0; }); // array(1, 3)</pre>

<p class="block" id="select"><b class="function">all</b> <code>_::all(collection, iterator)</code></p>
<p>Returns true if all values in the collection pass the truth iterator test.</p>
<pre>_::all(array(1, 2, 3, 4), function($num) { return $num % 2 === 0; }); // false
_::all(array(1, 2, 3, 4), function($num) { return $num < 5; }); // true</pre>

<p class="block" id="select"><b class="function">any</b> <code>_::any(collection, iterator)</code></p>
<p>Returns true if any values in the collection pass the truth iterator test.</p>
<pre>_::any(array(1, 2, 3, 4), function($num) { return $num % 2 === 0; }); // true
_::any(array(1, 2, 3, 4), function($num) { return $num === 5; }); // false</pre>

<p class="block" id="includ"><b class="function">includ</b> <code>_::includ(collection, value)</code> <span class="alias">Alias: <b>contains</b></span></p>
<p>Returns true if value is found in the collection using === to test equality. This function is called 'include' in Underscore.js, but was renamed to 'includ' in Underscore.php because 'include' is a reserved keyword in PHP.</p>
<pre>_::includ(array(1, 2, 3), 3); // true</pre>

<p class="block" id="invoke"><b class="function">invoke</b> <code>_::invoke(collection, functionName)</code></p>
<p>Returns a copy of the collection after running functionName across all elements.</p>
<pre>_::invoke(array(' foo', ' bar '), 'trim'); // array('foo', 'bar')</pre>

<p class="block" id="pluck"><b class="function">pluck</b> <code>_::pluck(collection, propertyName)</code></p>
<p>Extract an array of property values</p>
<pre>$stooges = array(
  array('name'=>'moe', 'age'=>40),
  array('name'=>'larry', 'age'=>50),
  array('name'=>'curly', 'age'=>60)
);
_::pluck($stooges, 'name'); // array('moe', 'larry', 'curly')</pre>

<p class="block" id="max"><b class="function">max</b> <code>_::max(collection, [iterator])</code></p>
<p>Returns the maximum value from the collection. If passed an iterator, max will return max value returned by the iterator. Unlike Underscore.js, context is passed using PHP's <code class="inline">use</code> statement.</p>
<pre>$stooges = array(
  array('name'=>'moe', 'age'=>40),
  array('name'=>'larry', 'age'=>50),
  array('name'=>'curly', 'age'=>60)
);
_::max($stooges, function($stooge) { return $stooge['age']; });
// array('name'=>'curly', 'age'=>60)</pre>

<p class="block" id="min"><b class="function">min</b> <code>_::min(collection, [iterator])</code></p>
<p>Returns the minimum value from the collection. If passed an iterator, min will return min value returned by the iterator. Unlike Underscore.js, context is passed using PHP's <code class="inline">use</code> statement.</p>
<pre>$stooges = array(
  array('name'=>'moe', 'age'=>40),
  array('name'=>'larry', 'age'=>50),
  array('name'=>'curly', 'age'=>60)
);
_::min($stooges, function($stooge) { return $stooge['age']; });
// array('name'=>'moe', 'age'=>40)</pre>

<p class="block" id="sortBy"><b class="function">sortBy</b> <code>_::sortBy(collection, iterator)</code></p>
<p>Returns a sorted array based on the iterator. If passed an iterator, min will return min value returned by the iterator. Unlike Underscore.js, context is passed using PHP's <code class="inline">use</code> statement.</p>
<pre>_::sortBy(array(1, 2, 3), function($n) { return -$n; }); // array(3, 2, 1)</pre>

<p class="block" id="sortedIndex"><b class="function">sortedIndex</b> <code>_::sortedIndex(collection, value, [iterator])</code></p>
<p>Returns the index at which the value should be inserted into the sorted collection.</p>
<pre>_::sortedIndex(array(10, 20, 30, 40), 35); // 3</pre>

<p class="block" id="toArray"><b class="function">toArray</b> <code>_::toArray(collection)</code></p>
<p>Converts the collection into an array.</p>
<pre>$stooge = new StdClass;
$stooge->name = 'moe';
$stooge->age = 40;
_::toArray($stooge); // array('name'=>'moe', 'age'=>40)</pre>

<p class="block" id="size"><b class="function">size</b> <code>_::size(collection)</code></p>
<p>Returns the number of values in the collection.</p>
<pre>$stooge = new StdClass;
$stooge->name = 'moe';
$stooge->age = 40;
_::size($stooge); // 2</pre>


<h2 id="arrays">Arrays</h2>
<p class="block" id="first"><b class="function">first</b> <code>_::first(array, [n])</code> <span class="alias">Alias: <b>head</b></span></p>
<p>Get the first element of an array. Passing n returns the first n elements.</p>
<pre>_::first(array(5, 4, 3, 2, 1)); // 5
_::first(array(5, 4, 3, 2, 1), 3); // array(5, 4, 3)</pre>

<p class="block" id="rest"><b class="function">rest</b> <code>_::rest(array, [index])</code> <span class="alias">Alias: <b>tail</b></span></p>
<p>Get the rest of the array elements. Passing an index returns from that index onward.</p>
<pre>_::rest(array(5, 4, 3, 2, 1)); // array(4, 3, 2, 1)</pre>

<p class="block" id="last"><b class="function">last</b> <code>_::last(array)</code></p>
<p>Get the last element of an array.</p>
<pre>_::last(array(5, 4, 3, 2, 1)); // 1</pre>

<p class="block" id="compact"><b class="function">compact</b> <code>_::compact(array)</code></p>
<p>Returns a copy of the array with falsy values removed</p>
<pre>_::compact(array(false, true, 'a', 0, 1, '')); // array(true, 'a', 1)</pre>

<p class="block" id="flatten"><b class="function">flatten</b> <code>_::flatten(array)</code></p>
<p>Flattens a multidimensional array</p>
<pre>_::flatten(array(1, array(2), array(3, array(array(array(4))))));
// array(1, 2, 3, 4)</pre>

<p class="block" id="without"><b class="function">without</b> <code>_::without(array, [*values])</code></p>
<p>Returns a copy of the array with all instances of <b>values</b> removed. === is used for equality testing.</p>
<pre>_::without(array(5, 4, 3, 2, 1), 3, 2); // array(5, 4, 1)</pre>

<p class="block" id="uniq"><b class="function">uniq</b> <code>_::uniq(array)</code> <span class="alias">Alias: <b>unique</b></span></p>
<p>Returns a copy of the array containing no duplicate values. Unlike Underscore.js, Underscore.php does not accept a second isSorted parameter.</p>
<pre>_::uniq(array(2, 2, 4, 4, 4, 1, 1, 1)); // array(2, 4, 1)</pre>



<p class="block" id="intersect"><b class="function">intersect</b> <code>_::intersect(*arrays)</code></p>
<p>Returns an array containing the intersection of all the arrays. Each value in the resulting array exists in all arrays.</p>
<pre>$arr1 = array(0, 1, 2, 3);
$arr2 = array(1, 2, 3, 4);
$arr3 = array(2, 3, 4, 5);
_::intersect($arr1, $arr2, $arr3); // array(2, 3)</pre>

<p class="block" id="zip"><b class="function">zip</b> <code>_::zip(*arrays)</code></p>
<p>Merges arrays</p>
<pre>$names = array('moe', 'larry', 'curly');
$ages = array(30, 40, 50);
$leaders = array(true, false, false);

_::zip($names, $ages, $leaders);
// array(
//   array('moe', 30, true),
//   array('larry', 40, false),
//   array('curly', 50, false)
// )</pre>

<p class="block" id="indexOf"><b class="function">indexOf</b> <code>_::indexOf(array, value)</code></p>
<p>Returns the index of the first match. Returns -1 if no match is found. Unlike Underscore.js, Underscore.php does not take a second isSorted parameter.</p>
<pre>_::indexOf(array(1, 2, 3, 2, 2), 2); // 1</pre>

<p class="block" id="lastIndexOf"><b class="function">lastIndexOf</b> <code>_::lastIndexOf(array, value)</code></p>
<p>Returns the index of the last match. Returns -1 if no match is found.</p>
<pre>_::indexOf(array(1, 2, 3, 2, 2), 2); // 4</pre>

<p class="block" id="range"><b class="function">range</b> <code>_::range([start], stop, [step])</code></p>
<p>Returns an array of integers from <b>start</b> to <b>stop</b> (exclusive) by <b>step</b>. Defaults: <b>start</b>=0, <b>step</b>=1.</p>
<pre>_::range(10);         // array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
_::range(1, 5);       // array(1, 2, 3, 4)
_::range(0, 30, 5);   // array(0, 5, 10, 15, 20, 25)
_::range(0, -5, -1);  // array(0, -1, -2, -3, -4)
_::range(0);          // array()</pre>

<h2 id="collections">Functions</h2>
<p class="block" id="memoize"><b class="function">memoize</b> <code>_::memoize(function, [hashFunction])</code></p>
<p>Memoizes a function by caching the computed result. Useful for computationally expensive functions. Optionally, pass a hashFunction to calculate the key for the cached value.</p>
<pre>$fibonacci = function($n) use (&$fibonacci) {
  return $n < 2 ? $n : $fibonacci($n - 1) + $fibonacci($n - 2);
};
$fastFibonacci = _::memoize($fibonacci);
</pre>

<p class="block" id="throttle"><b class="function">throttle</b> <code>_::throttle(function, wait)</code></p>
<p>Throttles a function so that it can only be called once every <b>wait</b> milliseconds.</p>
<pre>$func = function() { return 'x'; }
_::throttle($func);</pre>

<p class="block" id="once"><b class="function">once</b> <code>_::once(function)</code></p>
<p>Creates a version of the function that can only be called once.</p>
<pre>$func = _::once(function() { return 'x'; });
$func(); // x
$func(); //</pre>

<p class="block" id="after"><b class="function">after</b> <code>_::after(count, function)</code></p>
<p>Creates a version of the function that will only run after being called <b>count</b> times.</p>
<pre>$func = _::after(3, function() { return 'x'; });
$func(); //
$func(); //
$func(); // x</pre>

<p class="block" id="wrap"><b class="function">wrap</b> <code>_::wrap(function, wrapper)</code></p>
<p>Wraps the <b>function</b> inside the <b>wrapper</b> function, passing it as the first argument. Lets the <b>wrapper</b> execute code before and/or after the <b>function</b> runs.</p>
<pre>$hello = function($name) { return 'hello: ' . $name; };
$hi = _::wrap($hello, function($func) {
  return 'before, ' . $func('moe') . ', after'; 
});
$hi(); // before, hello: moe, after</pre>

<p class="block" id="compose"><b class="function">compose</b> <code>_::compose(*functions)</code></p>
<p>Returns the composition of the <b>functions</b>, where the return value is passed to the following function.</p>
<pre>$greet = function($name) { return 'hi: ' . $name; };
$exclaim = function($statement) { return $statement . '!'; };
$welcome = _::compose($exclaim, $greet);
$welcome(); // hi: moe!
</pre>

    <h2>Author</h2>
    <p>Brian Haveri <a href="https://github.com/brianhaveri/">GitHub</a>, <a href="http://twitter.com/brianhaveri">@brianhaveri</a></p>
    
    <h3>Credit</h3>
    <p>Thanks to Jeremy Ashkenas and all contributors to Underscore.js.</p>
  </div>

  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-11187420-10");
  pageTracker._trackPageview();
  } catch(err) {}
  </script>
</body>
</html>
